<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Business Connection Guide</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="app">
        <header>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <h1 id="stepTitle">–®–∞–≥ 1 –∏–∑ 4</h1>
        </header>

        <main>
            <!-- Step 1 -->
            <div class="step-card active" id="card1">
                <div class="illustration">‚öôÔ∏è</div>
                <h2>–û—Ç–∫—Ä–æ–π—Ç–µ –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <p>–í –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é Telegram –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª <b>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</b>.</p>
                <div class="hint">–≠—Ç–æ –∏–∫–æ–Ω–∫–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ —Å–Ω–∏–∑—É –∏–ª–∏ –≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é.</div>
            </div>

            <!-- Step 2 -->
            <div class="step-card" id="card2">
                <div class="illustration">üíº</div>
                <h2>Telegram Business</h2>
                <p>–ù–∞–π–¥–∏—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –ø—É–Ω–∫—Ç <b>Telegram Business</b>.</p>
                <div class="hint">–û–±—ã—á–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–¥–µ–ª–æ–º –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å.</div>
            </div>

            <!-- Step 3 -->
            <div class="step-card" id="card3">
                <div class="illustration">ü§ñ</div>
                <h2>–ß–∞—Ç-–±–æ—Ç—ã</h2>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª <b>–ß–∞—Ç-–±–æ—Ç—ã</b>.</p>
                <div class="hint">–ó–¥–µ—Å—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –±–æ—Ç—ã –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç–∞.</div>
            </div>

            <!-- Step 4 -->
            <div class="step-card" id="card4">
                <div class="illustration">‚úÖ</div>
                <h2>–î–æ–±–∞–≤—å—Ç–µ –Ω–∞—à–µ–≥–æ –±–æ—Ç–∞</h2>
                <p>–ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å" –∏ –≤–≤–µ–¥–∏—Ç–µ —é–∑–µ—Ä–Ω–µ–π–º:</p>
                <div class="bot-box" id="botUsername" onclick="copyBotName()">@loading...</div>
                <div class="hint">–†–∞–∑—Ä–µ—à–∏—Ç–µ –±–æ—Ç—É –¥–æ—Å—Ç—É–ø –∫ —Å–æ–æ–±—â–µ–Ω–∏—è–º.</div>
            </div>
        </main>

        <footer>
            <button id="prevBtn" class="btn-secondary" style="display: none;">–ù–∞–∑–∞–¥</button>
            <button id="nextBtn" class="btn-primary">–î–∞–ª–µ–µ</button>
        </footer>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        let currentStep = 1;
        const totalSteps = 4;

        const urlParams = new URLSearchParams(window.location.search);
        const botName = urlParams.get('bot') || '–≤–∞—à–µ–≥–æ –±–æ—Ç–∞';
        document.getElementById('botUsername').innerText = '@' + botName;

        const stepTitle = document.getElementById('stepTitle');
        const progress = document.getElementById('progress');
        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn');

        function updateUI() {
            stepTitle.innerText = `–®–∞–≥ ${currentStep} –∏–∑ ${totalSteps}`;
            progress.style.width = `${(currentStep / totalSteps) * 100}%`;

            document.querySelectorAll('.step-card').forEach((card, idx) => {
                card.classList.toggle('active', idx + 1 === currentStep);
            });

            prevBtn.style.display = currentStep === 1 ? 'none' : 'block';
            nextBtn.innerText = currentStep === totalSteps ? '–ü—Ä–æ–≤–µ—Ä–∏—Ç—å' : '–î–∞–ª–µ–µ';
        }

        nextBtn.addEventListener('click', () => {
            if (currentStep < totalSteps) {
                currentStep++;
                updateUI();
            } else {
                // –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
                tg.sendData(JSON.stringify({ action: 'check_business_connection' }));
                tg.close();
            }
        });

        prevBtn.addEventListener('click', () => {
            if (currentStep > 1) {
                currentStep--;
                updateUI();
            }
        });

        function copyBotName() {
            const text = document.getElementById('botUsername').innerText;
            navigator.clipboard.writeText(text).then(() => {
                tg.showAlert('–Æ–∑–µ—Ä–Ω–µ–π–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
            });
        }

        updateUI();
    </script>
</body>

</html>